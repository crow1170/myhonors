'use strict'

angular.module('myhonorsInternal').controller('ShirtSwipeCtrl', function($scope, $timeout, FirebaseIO, UserService) {
	$scope.buttons = ['Small', 'Medium', 'Large', 'X-Large', 'XX-Large'];
	$scope.showButtons = false;
	$scope.pageTitle = 'Shirt Swipe';
	$scope.question = "What's your shirt size?";

	var newStudentPIDs = {
		'3117665': true,
		'4891873': true,
		'3579697': true,
		'3994276': true,
		'4065906': true,
		'4078690': true,
		'3589582': true,
		'3366982': true,
		'4129121': true,
		'4065969': true,
		'3958893': true,
		'3691613': true,
		'4857148': true,
		'4660554': true,
		'4277871': true,
		'3924294': true,
		'3913780': true,
		'4826285': true,
		'3596949': true,
		'3650115': true,
		'3642003': true,
		'4165694': true,
		'3623941': true,
		'4795941': true,
		'3885282': true,
		'3944139': true,
		'3370980': true,
		'3619585': true,
		'3616454': true,
		'4074357': true,
		'4078355': true,
		'4235426': true,
		'4065774': true,
		'4215786': true,
		'2923501': true,
		'3789025': true,
		'4165356': true,
		'4367933': true,
		'4165360': true,
		'2670868': true,
		'4236501': true,
		'4804538': true,
		'2355946': true,
		'4005093': true,
		'4238472': true,
		'3691853': true,
		'4078087': true,
		'4216150': true,
		'3284554': true,
		'4039672': true,
		'4074183': true,
		'3691974': true,
		'4288959': true,
		'3602767': true,
		'4613906': true,
		'3706832': true,
		'3994297': true,
		'3331076': true,
		'4132323': true,
		'3960176': true,
		'3383250': true,
		'3004594': true,
		'3885933': true,
		'3664441': true,
		'3618249': true,
		'4148552': true,
		'3987025': true,
		'4301629': true,
		'4007939': true,
		'4757699': true,
		'4702058': true,
		'3998667': true,
		'3578041': true,
		'3014498': true,
		'3784285': true,
		'4707682': true,
		'3960193': true,
		'3621374': true,
		'4884071': true,
		'3706823': true,
		'4816710': true,
		'3553876': true,
		'4509497': true,
		'4851335': true,
		'3903952': true,
		'4014476': true,
		'4142302': true,
		'4845370': true,
		'4828660': true,
		'4828661': true,
		'3691500': true,
		'3625770': true,
		'3664225': true,
		'4149620': true,
		'4215658': true,
		'3797091': true,
		'3962936': true,
		'3176170': true,
		'3874704': true,
		'3034366': true,
		'4750293': true,
		'4878957': true,
		'3706800': true,
		'4826335': true,
		'3641990': true,
		'4078677': true,
		'4158973': true,
		'3884570': true,
		'4158974': true,
		'2916678': true,
		'4041350': true,
		'3379232': true,
		'3618242': true,
		'4072507': true,
		'3614790': true,
		'3579235': true,
		'3568636': true,
		'4173826': true,
		'4860495': true,
		'4901113': true,
		'4174550': true,
		'3382751': true,
		'3742269': true,
		'2926680': true,
		'3996220': true,
		'4702101': true,
		'3596581': true,
		'3645547': true,
		'3354889': true,
		'4174075': true,
		'3380044': true,
		'3703485': true,
		'3524259': true,
		'4851303': true,
		'3614251': true,
		'4510836': true,
		'4070430': true,
		'4088077': true,
		'4804467': true,
		'4705874': true,
		'4702003': true,
		'4078713': true,
		'3809209': true,
		'4077898': true,
		'3383109': true,
		'3618137': true,
		'4202267': true,
		'3652469': true,
		'4068068': true,
		'3324803': true,
		'3179962': true,
		'4725876': true,
		'4857363': true,
		'3987126': true,
		'3745353': true,
		'4078533': true,
		'4660493': true,
		'3828436': true,
		'4703592': true,
		'4891114': true,
		'3912329': true,
		'4249351': true,
		'3886275': true,
		'2670662': true,
		'4140124': true,
		'4850672': true,
		'3663971': true,
		'3552152': true,
		'4887316': true,
		'4142494': true,
		'4078193': true,
		'4669758': true,
		'4848962': true,
		'3987517': true,
		'4142052': true,
		'3706862': true,
		'3736337': true,
		'3368014': true,
		'3966782': true,
		'3506281': true,
		'4533859': true,
		'4052968': true,
		'3367708': true,
		'3747037': true,
		'4070431': true,
		'3650112': true,
		'3747506': true,
		'4081162': true,
		'3232144': true,
		'3986879': true,
		'4855357': true,
		'3282705': true,
		'3367824': true,
		'4180607': true,
		'4301697': true,
		'4143116': true,
		'4213716': true,
		'4702084': true,
		'4078680': true,
		'4026843': true,
		'4512620': true,
		'3691843': true,
		'3951352': true,
		'4101417': true,
		'3699108': true,
		'4690023': true,
		'4078866': true,
		'3699026': true,
		'4826678': true,
		'4055330': true,
		'2997953': true,
		'4026600': true,
		'3767646': true,
		'3411488': true,
		'3958937': true,
		'3994023': true,
		'3998361': true,
		'3691569': true,
		'4709116': true,
		'3049101': true,
		'3589723': true,
		'3737328': true,
		'3924087': true,
		'4083934': true,
		'4083959': true,
		'3699001': true,
		'4653907': true,
		'3326661': true,
		'4143099': true,
		'4080393': true,
		'3873935': true,
		'3459909': true,
		'3367578': true,
		'4101154': true,
		'4101297': true,
		'3025823': true,
		'4011783': true,
		'4653489': true,
		'2984732': true,
		'4142340': true,
		'4143119': true,
		'4932427': true,
		'4142537': true,
		'3456629': true,
		'3621327': true,
		'3618236': true,
		'3354099': true,
		'4013469': true,
		'3691740': true,
		'4826611': true,
		'3994993': true,
		'4159003': true,
		'3754570': true,
		'3754253': true,
		'3013147': true,
		'3964144': true,
		'3337438': true,
		'3980786': true,
		'3186396': true,
		'3367212': true,
		'4299933': true,
		'4040186': true,
		'4000522': true,
		'4645793': true,
		'4139384': true,
		'3763324': true,
		'4069170': true,
		'3457019': true,
		'3996716': true,
		'4089159': true,
		'3995131': true,
		'2923863': true,
		'4174288': true,
		'3382068': true,
		'3380066': true,
		'4238960': true,
		'4173855': true,
		'3381983': true,
		'3980789': true,
		'4059129': true,
		'3763444': true,
		'3988165': true,
		'3381954': true,
		'4238703': true,
		'4890511': true,
		'4857835': true,
		'3602566': true,
		'4853287': true,
		'3997538': true,
		'3933575': true,
		'3622101': true,
		'3372767': true,
		'3950022': true,
		'3337922': true,
		'3552939': true,
		'4819259': true,
		'4078563': true,
		'3754769': true,
		'4265232': true,
		'4750616': true,
		'4139308': true,
		'4159033': true,
		'3914566': true,
		'4892516': true,
		'3850383': true,
		'4572487': true,
		'3320273': true,
		'4265344': true,
		'4265345': true,
		'3754507': true,
		'4076902': true,
		'3578698': true,
		'4158488': true,
		'3998356': true,
		'3692774': true,
		'3988166': true,
		'4046063': true,
		'3618294': true,
		'3961315': true,
		'4953820': true,
		'3641178': true,
		'3886796': true,
		'4129019': true,
		'3758321': true,
		'3547301': true,
		'4088344': true,
		'4878777': true,
		'4528794': true,
		'4163443': true,
		'4139607': true,
		'4649745': true,
		'3791594': true,
		'4808349': true,
		'4180645': true,
		'4887307': true,
		'3699074': true,
		'3401287': true,
		'4022832': true,
		'4816299': true,
		'4614263': true,
		'3624568': true,
		'4188419': true,
		'3602307': true,
		'4046824': true,
		'4146836': true,
		'4015026': true,
		'3699071': true,
		'4779269': true,
		'4009690': true,
		'3602543': true,
		'4818702': true,
		'4888048': true,
		'3553246': true,
		'3691883': true,
		'3725059': true,
		'4301630': true,
		'3367630': true,
		'3367089': true,
		'3367088': true,
		'3791595': true,
		'4215390': true,
		'4837415': true,
		'3763400': true,
		'4646031': true,
		'4040363': true,
		'3867208': true,
		'4078757': true,
		'4238526': true,
		'3913385': true,
		'3330241': true,
		'3577646': true,
		'4888361': true,
		'2923877': true,
		'4026856': true,
		'3597030': true,
		'4260849': true,
		'2598602': true,
		'4159100': true,
		'3597920': true,
		'4139304': true,
		'4157682': true,
		'3933897': true,
		'3763426': true,
		'3658130': true,
		'4158608': true,
		'4215500': true,
		'4142367': true,
		'4782862': true,
		'3754544': true,
		'3330998': true,
		'3319745': true,
		'3691627': true,
		'3763339': true,
		'3703844': true,
		'3521000': true,
		'3789494': true,
		'4041340': true,
		'3256754': true,
		'3500997': true,
		'3382020': true,
		'3632404': true,
		'4174165': true,
		'3999426': true,
		'3328365': true,
		'4407981': true,
		'3491264': true,
		'4707551': true,
		'3612569': true,
		'3602570': true,
		'3838518': true,
		'4667417': true,
		'4005804': true,
		'3754712': true,
		'4407968': true,
		'4867744': true,
		'3960772': true,
		'3763439': true,
		'3596931': true,
		'4013896': true,
		'4896643': true,
		'3844627': true,
		'4213810': true,
		'3883937': true,
		'3384059': true,
		'3657660': true,
		'4406130': true,
		'3763322': true,
		'4367681': true,
		'3838592': true,
		'4572168': true,
		'3879191': true,
		'4851693': true,
		'3601422': true,
		'4269719': true,
		'4024702': true,
		'3763428': true,
		'4199939': true,
		'3987660': true,
		'3850442': true,
		'3746284': true,
		'4851620': true,
		'3763417': true,
		'4261100': true,
		'1743745': true,
		'3986151': true,
		'3763401': true,
		'4815688': true,
		'3648478': true,
		'4000490': true,
		'3763604': true,
		'3786925': true,
		'3495902': true,
		'3691803': true,
		'4199702': true,
		'3986613': true,
		'3763347': true,
		'3605616': true,
		'3931867': true,
		'4808555': true,
		'4271705': true,
		'4089020': true,
		'3891489': true,
		'3913447': true,
		'4877115': true,
		'4129294': true,
		'3559517': true,
		'3288982': true,
		'4141797': true,
		'3623121': true,
		'4288802': true,
		'4163896': true,
		'4129027': true,
		'3997195': true,
		'3612702': true,
		'3698998': true,
		'4267670': true,
		'4129319': true,
		'3597934': true,
		'4887729': true,
		'4129033': true,
		'3988169': true,
		'4807779': true,
		'4078611': true,
		'4089620': true,
		'4184305': true,
		'4854981': true,
		'4141798': true,
		'4818469': true,
		'2918904': true,
		'4774803': true,
		'4531838': true,
		'3980928': true,
		'3639410': true,
		'4041189': true,
		'3819255': true,
		'4071058': true,
		'3367695': true,
		'4690256': true,
		'3351653': true,
		'4090228': true,
		'3367991': true,
		'4159123': true,
		'4159477': true,
		'4220042': true,
		'3986307': true,
		'3723671': true,
		'4159127': true,
		'4161308': true,
		'4138421': true,
		'4158782': true,
		'3337392': true,
		'4220077': true,
		'4219809': true,
		'2846594': true,
		'4216481': true,
		'2720249': true,
		'4544222': true,
		'3933354': true,
		'4026708': true,
		'4219497': true,
		'3703007': true,
		'4890466': true,
		'4660902': true,
		'4521206': true,
		'3328230': true,
		'4655704': true,
		'4890794': true,
		'3350826': true,
		'3349144': true,
		'3691806': true,
		'4406412': true,
		'4217717': true,
		'4954112': true,
		'4890081': true,
		'4851314': true,
		'3723668': true,
		'3691563': true,
		'3691724': true,
		'4012236': true,
		'3962869': true,
		'3650113': true,
		'3421077': true,
		'4750644': true,
		'4718168': true,
		'3961509': true,
		'3691820': true,
		'3691605': true,
		'3995065': true,
		'3737003': true,
		'3629647': true,
		'3514412': true,
		'4718827': true,
		'3956542': true,
		'4892973': true,
		'3642008': true,
		'4129280': true,
		'3383175': true,
		'4676432': true,
		'3691544': true,
		'4031335': true,
		'4236516': true,
		'4227156': true,
		'3923693': true,
		'4818431': true,
		'4690065': true,
		'4792210': true,
		'3691589': true,
		'3323216': true,
		'4140366': true,
		'4023394': true,
		'3737307': true,
		'4142520': true,
		'3754494': true,
		'4141907': true,
		'3747512': true,
		'4406452': true,
		'3885046': true,
		'3506259': true,
		'3754572': true,
		'4257178': true,
		'3485727': true,
		'3491243': true,
		'4142562': true,
		'3838843': true,
		'3791545': true,
		'4014768': true,
		'3754568': true,
		'4032067': true,
		'3754575': true,
		'3737015': true,
		'4407985': true,
		'4228380': true,
		'3506168': true,
		'4036595': true,
		'4821541': true,
		'3963893': true,
		'3994272': true,
		'4220053': true,
		'3818870': true,
		'3999893': true,
		'4090344': true,
		'3731811': true,
		'4065949': true,
		'3995055': true,
		'3731773': true,
		'4235659': true,
		'3602713': true,
		'3354152': true,
		'4078428': true,
		'3381863': true,
		'3625852': true,
		'3325674': true,
		'4299581': true,
		'3731777': true,
		'3817237': true,
		'3964764': true,
		'3605608': true,
		'4159145': true,
		'3316309': true,
		'3731792': true,
		'3354056': true,
		'4212482': true,
		'4876192': true,
		'4678450': true,
		'4007264': true,
		'4158857': true,
		'4722782': true,
		'3629748': true,
		'4826692': true,
		'4826627': true,
		'3962068': true,
		'4013615': true,
		'4202833': true,
		'4625250': true,
		'4160670': true,
		'3340956': true,
		'4010637': true,
		'3382180': true,
		'4272575': true,
		'4826377': true,
		'4887339': true,
		'4087821': true,
		'3639585': true,
		'4962379': true,
		'3426492': true,
		'4041485': true,
		'3960990': true,
		'4236519': true,
		'4183371': true,
		'4041486': true,
		'3736467': true,
		'4300019': true,
		'4725047': true,
		'3641993': true,
		'3642055': true,
		'3256097': true,
		'3579360': true,
		'3986427': true,
		'3523404': true,
		'3337369': true,
		'3606903': true,
		'4052938': true,
		'4199113': true,
		'3635155': true,
		'3367976': true,
		'3945871': true,
		'4129291': true,
		'4145911': true,
		'4129890': true,
		'4065757': true,
		'4150490': true,
		'4157394': true,
		'4040698': true,
		'3964515': true,
		'3544932': true,
		'4066025': true,
		'4887341': true,
		'4130498': true,
		'3691665': true,
		'4129127': true,
		'4289838': true,
		'3367549': true,
		'4543938': true,
		'4172769': true,
		'3691582': true,
		'4660475': true,
		'4853323': true,
		'4186980': true,
		'3367142': true,
		'4078853': true,
		'4129166': true,
		'2888161': true,
		'4808457': true,
		'2693537': true,
		'4114103': true,
		'3367148': true,
		'4156391': true,
		'3783946': true,
		'3745354': true,
		'3337461': true,
		'4142592': true,
		'4156737': true,
		'4219609': true,
		'4220698': true,
		'4157493': true,
		'3413145': true,
		'4065789': true,
		'3641994': true,
		'4087745': true,
		'4129168': true,
		'3932553': true,
		'4088503': true,
		'3456899': true,
		'3963855': true,
		'3736783': true,
		'4078374': true,
		'4129074': true,
		'3979394': true,
		'4078366': true,
		'4060594': true
	};

	$scope.swipe = function() {
		if (newStudentPIDs[$scope.data.userId]) {
			FirebaseIO.child('user_profiles/' + $scope.data.userId).once('value', function(snapshot) {
				$timeout(function() {
					if (snapshot.val() === null || snapshot.child('shirtSize').val() === null) {
						// allow the user to have a shirt
						$scope.showButtons = true;
						$scope.currentTokens = snapshot.val();
						$scope.error = false;
					} else {
						$scope.error = 'Our system shows that you already received a shirt.';
						$scope.data.userId = '';
					}
				});
			});
		} else {
			$scope.error = 'Our system says that you are not a "new student".';
			$scope.data.userId = '';
		}
	};

	$scope.save = function(shirtSize) {
		FirebaseIO.child('user_profiles/' + $scope.data.userId + '/shirtSize').set(shirtSize);
		$scope.error = false;
		$scope.showButtons = false;
		$scope.data.userId = '';
		$('input').focus();
	};
});